<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Enhanced To-Do List</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .container {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
      width: 100%;
      max-width: 450px;
      animation: slideIn 0.6s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    h1 {
      text-align: center;
      color: #333;
      margin-bottom: 30px;
      font-size: 2.2em;
      font-weight: 300;
      letter-spacing: -1px;
    }

    .input-section {
      display: flex;
      gap: 10px;
      margin-bottom: 25px;
      position: relative;
    }

    #taskInput {
      flex: 1;
      padding: 15px;
      border: 2px solid #e1e5e9;
      border-radius: 12px;
      font-size: 16px;
      outline: none;
      transition: all 0.3s ease;
      background: #fafafa;
    }

    #taskInput:focus {
      border-color: #667eea;
      background: white;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    #addBtn {
      padding: 15px 20px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      font-size: 16px;
    }

    #addBtn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
    }

    #addBtn:active {
      transform: translateY(0);
    }

    .stats {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 12px;
      font-size: 14px;
      color: #666;
    }

    .filter-section {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
      justify-content: center;
    }

    .filter-btn {
      padding: 8px 16px;
      border: 2px solid #e1e5e9;
      background: white;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s ease;
      color: #666;
    }

    .filter-btn.active {
      background: #667eea;
      border-color: #667eea;
      color: white;
    }

    ul {
      list-style: none;
      padding: 0;
      max-height: 400px;
      overflow-y: auto;
    }

    ul::-webkit-scrollbar {
      width: 6px;
    }

    ul::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }

    ul::-webkit-scrollbar-thumb {
      background: #c1c1c1;
      border-radius: 10px;
    }

    li {
      background: white;
      margin: 8px 0;
      padding: 15px;
      border-radius: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border: 2px solid #f0f0f0;
      transition: all 0.3s ease;
      animation: taskSlideIn 0.4s ease-out;
      position: relative;
    }

    @keyframes taskSlideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    li:hover {
      border-color: #667eea;
      transform: translateY(-1px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    li.completed {
      background: #f8f9fa;
      border-color: #28a745;
      opacity: 0.7;
    }

    .task-text {
      flex: 1;
      cursor: pointer;
      user-select: none;
      transition: all 0.3s ease;
      line-height: 1.4;
    }

    li.completed .task-text {
      text-decoration: line-through;
      color: #6c757d;
    }

    .task-actions {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .complete-btn {
      width: 20px;
      height: 20px;
      border: 2px solid #28a745;
      border-radius: 50%;
      background: transparent;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      color: transparent;
      font-size: 12px;
    }

    .complete-btn:hover {
      background: #28a745;
      color: white;
    }

    li.completed .complete-btn {
      background: #28a745;
      color: white;
    }

    .delete-btn {
      background: #dc3545;
      color: white;
      border: none;
      padding: 6px 10px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 12px;
      transition: all 0.3s ease;
      opacity: 0.8;
    }

    .delete-btn:hover {
      opacity: 1;
      transform: scale(1.1);
    }

    .empty-state {
      text-align: center;
      color: #999;
      font-style: italic;
      padding: 40px 20px;
      display: none;
    }

    .empty-state.show {
      display: block;
    }

    .clear-completed {
      background: #6c757d;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      margin-top: 15px;
      width: 100%;
      transition: all 0.3s ease;
    }

    .clear-completed:hover {
      background: #5a6268;
    }

    @media (max-width: 480px) {
      .container {
        margin: 10px;
        padding: 20px;
      }
      
      .input-section {
        flex-direction: column;
      }
      
      #addBtn {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>âœ¨ My Tasks</h1>
    
    <div class="input-section">
      <input type="text" id="taskInput" placeholder="What needs to be done?" maxlength="100">
      <button id="addBtn">Add Task</button>
    </div>

    <div class="stats">
      <span id="totalTasks">Total: 0</span>
      <span id="completedTasks">Completed: 0</span>
      <span id="pendingTasks">Pending: 0</span>
    </div>

    <div class="filter-section">
      <button class="filter-btn active" data-filter="all">All</button>
      <button class="filter-btn" data-filter="pending">Pending</button>
      <button class="filter-btn" data-filter="completed">Completed</button>
    </div>

    <ul id="taskList"></ul>
    
    <div class="empty-state" id="emptyState">
      <p>ðŸŽ‰ No tasks yet! Add one above to get started.</p>
    </div>

    <button class="clear-completed" id="clearCompleted" style="display: none;">Clear Completed Tasks</button>
  </div>

  <script>
    class TodoApp {
      constructor() {
        this.tasks = JSON.parse(localStorage.getItem('tasks')) || [];
        this.currentFilter = 'all';
        this.initElements();
        this.bindEvents();
        this.render();
      }

      initElements() {
        this.taskInput = document.getElementById('taskInput');
        this.addBtn = document.getElementById('addBtn');
        this.taskList = document.getElementById('taskList');
        this.emptyState = document.getElementById('emptyState');
        this.clearCompleted = document.getElementById('clearCompleted');
        this.totalTasks = document.getElementById('totalTasks');
        this.completedTasks = document.getElementById('completedTasks');
        this.pendingTasks = document.getElementById('pendingTasks');
        this.filterBtns = document.querySelectorAll('.filter-btn');
      }

      bindEvents() {
        this.addBtn.addEventListener('click', () => this.addTask());
        this.taskInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') this.addTask();
        });
        this.clearCompleted.addEventListener('click', () => this.clearCompletedTasks());
        
        this.filterBtns.forEach(btn => {
          btn.addEventListener('click', (e) => this.setFilter(e.target.dataset.filter));
        });
      }

      addTask() {
        const text = this.taskInput.value.trim();
        if (!text) {
          this.showNotification('Please enter a task!', 'error');
          return;
        }

        if (this.tasks.some(task => task.text.toLowerCase() === text.toLowerCase())) {
          this.showNotification('This task already exists!', 'warning');
          return;
        }

        const task = {
          id: Date.now().toString(),
          text: text,
          completed: false,
          createdAt: new Date().toISOString()
        };

        this.tasks.unshift(task);
        this.taskInput.value = '';
        this.saveToStorage();
        this.render();
        this.showNotification('Task added successfully!', 'success');
      }

      toggleTask(id) {
        const task = this.tasks.find(t => t.id === id);
        if (task) {
          task.completed = !task.completed;
          task.completedAt = task.completed ? new Date().toISOString() : null;
          this.saveToStorage();
          this.render();
        }
      }

      deleteTask(id) {
        this.tasks = this.tasks.filter(t => t.id !== id);
        this.saveToStorage();
        this.render();
        this.showNotification('Task deleted!', 'info');
      }

      clearCompletedTasks() {
        const completedCount = this.tasks.filter(t => t.completed).length;
        this.tasks = this.tasks.filter(t => !t.completed);
        this.saveToStorage();
        this.render();
        this.showNotification(`${completedCount} completed tasks cleared!`, 'info');
      }

      setFilter(filter) {
        this.currentFilter = filter;
        this.filterBtns.forEach(btn => {
          btn.classList.toggle('active', btn.dataset.filter === filter);
        });
        this.render();
      }

      getFilteredTasks() {
        switch (this.currentFilter) {
          case 'completed':
            return this.tasks.filter(t => t.completed);
          case 'pending':
            return this.tasks.filter(t => !t.completed);
          default:
            return this.tasks;
        }
      }

      render() {
        const filteredTasks = this.getFilteredTasks();
        this.taskList.innerHTML = '';

        if (filteredTasks.length === 0) {
          this.emptyState.classList.add('show');
        } else {
          this.emptyState.classList.remove('show');
          filteredTasks.forEach(task => this.createTaskElement(task));
        }

        this.updateStats();
        this.updateClearButton();
      }

      createTaskElement(task) {
        const li = document.createElement('li');
        li.className = task.completed ? 'completed' : '';
        li.innerHTML = `
          <span class="task-text">${this.escapeHtml(task.text)}</span>
          <div class="task-actions">
            <button class="complete-btn" title="${task.completed ? 'Mark as pending' : 'Mark as completed'}">
              ${task.completed ? 'âœ“' : ''}
            </button>
            <button class="delete-btn" title="Delete task">Ã—</button>
          </div>
        `;

        const completeBtn = li.querySelector('.complete-btn');
        const deleteBtn = li.querySelector('.delete-btn');
        const taskText = li.querySelector('.task-text');

        completeBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          this.toggleTask(task.id);
        });

        deleteBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          this.deleteTask(task.id);
        });

        taskText.addEventListener('click', () => this.toggleTask(task.id));

        this.taskList.appendChild(li);
      }

      updateStats() {
        const total = this.tasks.length;
        const completed = this.tasks.filter(t => t.completed).length;
        const pending = total - completed;

        this.totalTasks.textContent = `Total: ${total}`;
        this.completedTasks.textContent = `Completed: ${completed}`;
        this.pendingTasks.textContent = `Pending: ${pending}`;
      }

      updateClearButton() {
        const hasCompleted = this.tasks.some(t => t.completed);
        this.clearCompleted.style.display = hasCompleted ? 'block' : 'none';
      }

      saveToStorage() {
        localStorage.setItem('tasks', JSON.stringify(this.tasks));
      }

      escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
      }

      showNotification(message, type = 'info') {
        // Simple notification system - could be enhanced with toast library
        const notification = document.createElement('div');
        notification.textContent = message;
        notification.style.cssText = `
          position: fixed;
          top: 20px;
          right: 20px;
          padding: 12px 20px;
          border-radius: 8px;
          color: white;
          font-weight: 500;
          z-index: 1000;
          animation: slideInRight 0.3s ease-out;
          background: ${type === 'success' ? '#28a745' : type === 'error' ? '#dc3545' : type === 'warning' ? '#ffc107' : '#17a2b8'};
        `;
        
        document.body.appendChild(notification);
        setTimeout(() => {
          notification.style.animation = 'slideOutRight 0.3s ease-in';
          setTimeout(() => document.body.removeChild(notification), 300);
        }, 3000);
      }
    }

    // Initialize the app
    new TodoApp();

    // Add CSS animations for notifications
    const style = document.createElement('style');
    style.textContent = `
      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(100px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }
      @keyframes slideOutRight {
        from {
          opacity: 1;
          transform: translateX(0);
        }
        to {
          opacity: 0;
          transform: translateX(100px);
        }
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>